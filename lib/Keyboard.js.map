{"version":3,"sources":["../src/Keyboard.js"],"names":[],"mappings":"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","file":"Keyboard.js","sourcesContent":["import React, {Component, PropTypes} from 'react';\nimport KeyboardButton from './KeyboardButton';\n\nimport KeyboardLatinConstants from './KeyboardLatinConstants';\nimport KeyboardCyrillicConstants from './KeyboardCyrillicConstants';\nimport KeyboardSymbolsConstants from './KeyboardSymbolsConstants';\n\nimport BackspaceIcon from './BackspaceIcon';\nimport LanguageIcon from './LanguageIcon';\nimport ShiftIcon from './ShiftIcon';\n\nexport default class Keyboard extends Component {\n\tstatic propTypes = {\n\t\tleftButtons: PropTypes.arrayOf(PropTypes.node),\n\t\trightButtons: PropTypes.arrayOf(PropTypes.node),\n\t\tinputNode: PropTypes.any.isRequired,\n\t\tonClick: PropTypes.func.isRequired,\n\t};\n\n\tstatic defaultProps = {\n\t\tleftButtons: [],\n\t\trightButtons: [],\n\t};\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {currentLanguage: 'latin', showSymbols: false, uppercase: true};\n\t\tthis.handleLetterButtonClick = this.handleLetterButtonClick.bind(this);\n\t\tthis.handleBackspaceClick = this.handleBackspaceClick.bind(this);\n\t\tthis.handleLanguageClick = this.handleLanguageClick.bind(this);\n\t\tthis.handleShiftClick = this.handleShiftClick.bind(this);\n\t\tthis.handleSymbolsClick = this.handleSymbolsClick.bind(this);\n\t\tthis.getSymbolsKeyValue = this.getSymbolsKeyValue.bind(this);\n\t\tthis.getKeys = this.getKeys.bind(this);\n\t}\n\n\thandleLanguageClick() {\n\t\tthis.setState({currentLanguage: this.state.currentLanguage === 'latin' ? 'cyrrilic' : 'latin'});\n\t}\n\n\thandleShiftClick() {\n\t\tthis.setState({uppercase: !this.state.uppercase});\n\t}\n\n\thandleSymbolsClick() {\n\t\tthis.setState({showSymbols: !this.state.showSymbols});\n\t}\n\n\thandleLetterButtonClick(key) {\n\t\tconst {value, selectionStart, selectionEnd} = this.props.inputNode;\n\t\tconst nextValue = value.substring(0, selectionStart) + key + value.substring(selectionEnd);\n\n\t\tthis.props.onClick(nextValue);\n\t\tsetTimeout(() => {\n\t\t\tthis.props.inputNode.focus();\n\t\t\tthis.props.inputNode.setSelectionRange(selectionStart + 1, selectionStart + 1);\n\t\t}, 0);\n\t\tthis.setState({uppercase: false});\n\t}\n\n\thandleBackspaceClick() {\n\t\tconst {value, selectionStart, selectionEnd} = this.props.inputNode;\n\t\tlet nextValue;\n\t\tlet nextSelectionPosition;\n\t\tif (selectionStart === selectionEnd) {\n\t\t\tnextValue = value.substring(0, selectionStart - 1) + value.substring(selectionEnd);\n\t\t\tnextSelectionPosition = selectionStart - 1;\n\t\t} else {\n\t\t\tnextValue = value.substring(0, selectionStart) + value.substring(selectionEnd);\n\t\t\tnextSelectionPosition = selectionStart;\n\t\t}\n\t\tnextSelectionPosition = (nextSelectionPosition > 0) ? nextSelectionPosition : 0;\n\n\t\tthis.props.onClick(nextValue);\n\t\tsetTimeout(() => {\n\t\t\tthis.props.inputNode.focus();\n\t\t\tthis.props.inputNode.setSelectionRange(nextSelectionPosition, nextSelectionPosition);\n\t\t}, 0);\n\t\tthis.setState({uppercase: !nextValue.length});\n\t}\n\n\tgetKeys() {\n\t\tlet keysSet;\n\t\tif (this.state.showSymbols) {\n\t\t\tkeysSet = KeyboardSymbolsConstants;\n\t\t} else if (this.state.currentLanguage === 'latin') {\n\t\t\tkeysSet = KeyboardLatinConstants;\n\t\t} else {\n\t\t\tkeysSet = KeyboardCyrillicConstants;\n\t\t}\n\n\t\treturn this.state.uppercase ?\n\t\t\tkeysSet.map(keyRow => keyRow.map(key => key.toUpperCase()))\n\t\t\t: keysSet;\n\t}\n\n\tgetSymbolsKeyValue () {\n\t\tlet symbolsKeyValue;\n\t\tif (!this.state.showSymbols) {\n\t\t\tsymbolsKeyValue = '.?!&';\n\t\t} else if (this.state.currentLanguage === 'latin') {\n\t\t\tsymbolsKeyValue = 'Abc';\n\t\t} else {\n\t\t\tsymbolsKeyValue = 'Абв';\n\t\t}\n\t\treturn symbolsKeyValue;\n\t}\n\n\trender() {\n\t\tconst {leftButtons, rightButtons} = this.props;\n\t\tconst keys = this.getKeys();\n\t\tconst numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0];\n\t\tconst symbolsKeyValue = this.getSymbolsKeyValue();\n\n\t\treturn (\n\t\t\t<div className=\"keyboard\">\n\t\t\t\t<div className=\"keyboard-row\">\n\t\t\t\t\t{numbers.map((button) =>\n\t\t\t\t\t\t<KeyboardButton\n\t\t\t\t\t\t\tvalue={button}\n\t\t\t\t\t\t\tonClick={this.handleLetterButtonClick}\n\t\t\t\t\t\t\tclasses={\"keyboard-numberButton\"}\n\t\t\t\t\t\t\tkey={button}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t<KeyboardButton\n\t\t\t\t\t\tvalue={<BackspaceIcon />}\n\t\t\t\t\t\tonClick={this.handleBackspaceClick}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"keyboard-row\">\n\t\t\t\t\t{keys[0].map((button) =>\n\t\t\t\t\t\t<KeyboardButton\n\t\t\t\t\t\t\tvalue={button}\n\t\t\t\t\t\t\tonClick={this.handleLetterButtonClick}\n\t\t\t\t\t\t\tkey={button}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"keyboard-row\">\n\t\t\t\t\t<div className=\"keyboard-halfButton\"></div>\n\t\t\t\t\t{keys[1].map((button) =>\n\t\t\t\t\t\t<KeyboardButton\n\t\t\t\t\t\t\t\tvalue={button}\n\t\t\t\t\t\t\t\tonClick={this.handleLetterButtonClick}\n\t\t\t\t\t\t\t\tkey={button}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t<div className=\"keyboard-halfButton\"></div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"keyboard-row\">\n\t\t\t\t\t<KeyboardButton\n\t\t\t\t\t\tvalue={<ShiftIcon />}\n\t\t\t\t\t\tonClick={this.handleShiftClick}\n\t\t\t\t\t/>\n\t\t\t\t\t{keys[2].map((button) =>\n\t\t\t\t\t\t<KeyboardButton\n\t\t\t\t\t\t\tvalue={button}\n\t\t\t\t\t\t\tonClick={this.handleLetterButtonClick}\n\t\t\t\t\t\t\tkey={button}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t<KeyboardButton\n\t\t\t\t\t\tvalue={symbolsKeyValue}\n\t\t\t\t\t\tonClick={this.handleSymbolsClick}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"keyboard-row\">\n\t\t\t\t\t{leftButtons}\n\t\t\t\t\t{hasLeftBottomButton ?\n\t\t\t\t\t\t<KeyboardButton\n\t\t\t\t\t\t\tvalue={leftBottomValue}\n\t\t\t\t\t\t\tclasses=\"keyboard-leftBottomButton\"\n\t\t\t\t\t\t\tonClick={handleLeftBottomClick}\n\t\t\t\t\t\t/>\n\t\t\t\t\t: null}\n\t\t\t\t\t<KeyboardButton\n\t\t\t\t\t\tvalue={<LanguageIcon />}\n\t\t\t\t\t\tonClick={this.handleLanguageClick}\n\t\t\t\t\t/>\n\t\t\t\t\t<KeyboardButton\n\t\t\t\t\t\tvalue={' '}\n\t\t\t\t\t\tclasses=\"keyboard-space\"\n\t\t\t\t\t\tonClick={this.handleLetterButtonClick}\n\t\t\t\t\t/>\n\t\t\t\t\t{rightButtons}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Keyboard;\n"]}